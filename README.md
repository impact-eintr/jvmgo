# jvmgo
jvm implement by golang

在加载一个类之前要先加载它的超类，也就是java.lang.Object

类路径可以分为三个部分
1. 启动类路径
2. 扩展类路径
3. 用户类路径

多线程共享的内存区域主要存放两种数据：类数据和类实例（对象）。对象数据存放在Heap中，类数据存放在方法区中。堆由垃圾收集器定时清理，类数据包括字段和方法信息、方法的字节码、运行时常量池等等。从逻辑上讲，其实方法区也是堆的一部分。

线程私有的运行是数据区用于辅助执行java字节码。每个线程都有自己的pc寄存器和java虚拟机栈。

JVM Stack 又由 Stack Frame 构成，栈帧中保存方法执行的状态，包括局部变量表和操作数栈(Operand Stack)等。在任一时刻，某一线程肯定是在执行某个方法。这个方法叫做该线程的当前方法；执行该方法的帧叫做线程的当前帧；声明该方法的类叫做当前类。

如果当前方法是java方法。则pc寄存器中存发当前正在执行的java虚拟机指令的地址，否则，当前方法是本地方法，pc寄存器中的值没有明确定义。


Java虚拟机规范对于运行时数据区的规定是相当宽松的。以堆为例:堆可以是连续空间,也可以不连续。堆的大小可以固定,也可以在运行时按需扩展。虚拟机实现者可以使用任何垃圾回收算法管理堆,甚至完全不进行垃圾收集也是可以的。由于Go本身也有垃圾回收功能,所以可以直接使用Go的堆和垃圾收集器,这大大简化了我们的工作。

Java虚拟机可以操作两类数据:基本类型(primitive type)和引用类型(reference type)。基本类型的变量存放的就是数据本身,引用类型的变量存放的是对象引用,真正的对象数据是在堆里分配的。这里所说的变量包括类变量(静态字段)、实例变量(非静态字段)、数组元素、方法的参数和局部变量,等等。



基本类型可以进一步分为布尔类型(boolean type)和数字类型(numeric type),数字类型又可以分为整数类型(integral type)和浮点数类型(floating-point type)。引用类型可以进一步分为3种:类类型、接口类型和数组类型。类类型引用指向类实例,数组类型引用指向数组实例,接口类型引用指向实现了该接口的类或数组实例。引用类型有一个特殊的值——null,表示该引用不指向任何对象。







